package com.zhd.exploit.api.controller;

import org.springframework.http.MediaType;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

import com.zhd.exploit.api.dto.BizException;
import com.zhd.exploit.api.dto.PayDTO;
import com.zhd.exploit.api.dto.Result;

@RestController
public class TestController {

	@RequestMapping(value = "/test", method = RequestMethod.GET, produces = { MediaType.APPLICATION_JSON_VALUE })
	public Result test(@RequestParam Boolean throwException) {
		// case 1
		if (throwException) {
			System.out.println("throw an exception");
			throw new BizException("1", "mock a server exception");
		}
		// case 2
		System.out.println("test OK");
		return new Result("0", "mock a Result");

	}

	@RequestMapping(value = "/test0", method = RequestMethod.GET, produces = { MediaType.APPLICATION_JSON_VALUE })
	public Result test0(@RequestParam String name, @RequestParam String password) {
		System.out.println("test0 OK");
		return new Result("1", "mock a Result");

	}

	@RequestMapping(value = "/test1", method = RequestMethod.GET, produces = { MediaType.APPLICATION_JSON_VALUE })
	public Result test1(PayDTO payDTO) {
		System.out.println("test1 OK");
		return new Result("1", "mock a Result");

	}

	@RequestMapping(value = "/test2", method = RequestMethod.POST, produces = { MediaType.APPLICATION_JSON_VALUE })
	public Result test2(@RequestBody PayDTO payDTO) {
		System.out.println("test2 OK");
		return new Result("2", "mock a Result");

	}

}
